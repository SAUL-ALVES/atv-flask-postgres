{% extends "base.html" %}
{% block title %}Lista de Contatos{% endblock %}
{% block content %}
  <h2>Lista de Contatos</h2>

  <form method="get" action="{{ url_for('users_page') }}">
    <input type="search" name="q" value="{{ q or '' }}" placeholder="Buscar por nome ou email" />
    <button type="submit">Buscar</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Nome</th>
        <th>Email</th>
        <th style="width:180px;">Ações</th>
      </tr>
    </thead>
    <tbody>
    {% for u in users %}
      <tr>
        <td>{{ u.id }}</td>
        <td>{{ u.nome }}</td>
        <td>{{ u.email }}</td>
        <td>
          <a href="{{ url_for('users_edit_form', user_id=u.id) }}">Editar</a> |
          <a href="{{ url_for('users_confirm_delete', user_id=u.id) }}">Excluir</a>
        </td>
      </tr>
    {% else %}
      <tr><td colspan="4">Nenhum contato encontrado.</td></tr>
    {% endfor %}
    </tbody>
  </table>
{% endblock %}